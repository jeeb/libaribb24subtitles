#include "../common.h"struct ARIB_data_unit* initialize_ARIB_data_unit(){	struct ARIB_data_unit* du = malloc(sizeof(struct ARIB_data_unit));	du->size = 0;	du->parameter = 0;	du->payload = NULL;	return du;}struct ARIB_data_group* initialize_ARIB_data_group(){	struct ARIB_data_group* dg = malloc(sizeof(struct ARIB_data_group));	dg->id = 0;	dg->size = 0;	dg->type = 0;	dg->hasOffsetTime = 0;	dg->offsetTime = NULL;	dg->languages_num = 0;	dg->languages = NULL;	dg->data_units_num = 0;	dg->data_units = NULL;		return dg;}struct TS_header* initialize_TS_header(){	struct TS_header* th = malloc(sizeof(struct TS_header));	th->PID = 0;	th->PUSI = 0;	th->AFC = 0;	return th;}struct PES_info* initialize_PES_info(){	struct PES_info* pi = malloc(sizeof(struct PES_info));	pi->header = initialize_TS_header();	pi->datagroup = initialize_ARIB_data_group();	pi->isPES = 0;	pi->isARIBB24 = 0;	pi->exit_code = ARIBB24_NO_ERROR;	pi->SID = 0;	pi->PPL = 0;	pi->PTSDTSF = 0;	pi->DTS = NULL;	return pi;}void clean_ARIB_data_unit(struct ARIB_data_unit *du){	if (du == NULL)		return;	if (du->payload != NULL)		free(du->payload);	free(du);}void clean_ARIB_data_group(struct ARIB_data_group *dg){	int i;		if (dg == NULL)		return;	if (dg->offsetTime != NULL)		free(dg->offsetTime);	if (dg->languages != NULL){		for (i = 0; i < dg->languages_num; i++)			free(dg->languages[i]);		free(dg->languages);	}	if (dg->data_units != NULL){		struct list_element* l = dg->data_units;		while (l != NULL){			if (l->element_data != NULL)					clean_ARIB_data_unit(l->element_data);			l=l->next;		}		struct list_element* first = dg->data_units;		while (first->next != NULL){			l = first;			while (l->next != NULL && l->next->next != NULL){				l = l->next;			}			if (l->next != NULL) {				free(l->next);				l->next = NULL;			} else {				first->next = NULL;			}		}		free(first);	}	free(dg);}void clean_PES_info(struct PES_info *pi){	if (pi->header != NULL)		free(pi->header);	if (pi->DTS != NULL)		free(pi->DTS);	if (pi->datagroup != NULL){		clean_ARIB_data_group(pi->datagroup);	}	free(pi);}